---
title: "direnvを使って環境変数を自動管理する~個人的な環境変数のベストプラクティス~"
emoji: "🔖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["direnv", "環境変数", "開発環境"]
published: true
---
## Direnvについて

**Direnv**は、シェルの拡張機能であり、ディレクトリごとに環境変数を自動的にロードおよびアンロードすることができます。これにより、プロジェクトごとに異なる環境設定を簡単に管理でき、開発者にとって非常に便利なツールです。

### Direnvのメリット

- **環境変数の自動管理**: Direnvは、ディレクトリに移動するたびに`.envrc`ファイルを読み込み、必要な環境変数を自動的に設定します。これにより、手動で環境変数を設定する手間が省けます[1][4][5]。
- **セキュリティ**: 新しいまたは変更された`.envrc`ファイルを読み込む際に許可を求めるため、意図しない環境変数の変更を防ぐことができます[5]。
- **シェルに依存しない**: Bash、Zsh、Fishなど、さまざまなシェルで動作するため、特定のシェルに依存せずに利用できます[1][4]。
- **プロジェクトごとの環境管理**: 複数のプロジェクトを扱う際に、それぞれのプロジェクトに特化した環境を簡単に切り替えることができます[5]。

### Direnvのインストール方法

Direnvのインストールは非常に簡単で、以下の手順で行います。

1. **パッケージマネージャを使用してインストール**:
   - **Homebrew（macOS）**: `brew install direnv`
   - **APT（Ubuntu）**: `sudo apt-get install direnv`
   - 他のLinuxディストリビューションでも、対応するパッケージマネージャを使用してインストールできます[6][7][12]。

2. **シェルへのフック**:
   - 使用しているシェルの設定ファイルに以下の行を追加します。
     - Bashの場合: `eval "$(direnv hook bash)"`
     - Zshの場合: `eval "$(direnv hook zsh)"`
   - 設定ファイルを保存し、シェルを再読み込みします（例: `source ~/.bashrc`）[1][5][13]。

### Direnvの使い方

1. **プロジェクトディレクトリの作成**:
   - 任意のディレクトリを作成し、そのディレクトリに移動します。
   ```bash
   mkdir my_project
   cd my_project
   ```

2. **`.envrc`ファイルの作成**:
   - プロジェクトディレクトリ内に`.envrc`ファイルを作成し、必要な環境変数を定義します。
   ```bash
   echo 'export PROJECT_NAME="My Awesome Project"' > .envrc
   ```

3. **`.envrc`ファイルの許可**:
   - 初めてディレクトリに入るとき、Direnvは`.envrc`ファイルの許可を求めます。以下のコマンドで許可します。
   ```bash
   direnv allow .
   ```

4. **環境変数の確認**:
   - 設定した環境変数が正しくロードされているか確認します。
   ```bash
   echo $PROJECT_NAME
   ```

## 終わりに
Direnvを使用することで、プロジェクトごとに異なる環境を簡単に管理でき、開発効率を大幅に向上させることができます。ぜひ、Direnvを導入して、開発作業をスムーズに進めてみてください。